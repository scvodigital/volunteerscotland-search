<div id="detailed-results-container" class="container-content content-shortlist">
  <div class="mdc-layout-grid">
    <div class="mdc-layout-grid__inner">
      <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone">
        <h1 class="mdc-typography--headline3 v-margin-full">
          Opportunities you have registered interest in.
        </h1>
      </div>
      <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone">
      </div>
      <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-1-desktop mdc-layout-grid__cell--span-4-tablet hide-sm">
      </div>
      <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone">
        <form action="{{{@root.request.url.path}}}" method="GET">
          <div class="mdc-select mdc-select--box pull-right" data-mdc-auto-init="MDCSelect">
            <select class="mdc-select__native-control" id="sort" name="sort" onchange="this.form.submit();">
              <option value="closing_soon"{{#compare @root.request.params.query.sort "===" "closing_soon"}} selected{{/compare}}>Closing soon</option>
              <option value="newest"{{#compare @root.request.params.query.sort "===" "newest"}} selected{{/compare}}>Newest</option>
              <option value="oldest"{{#compare @root.request.params.query.sort "===" "oldest"}} selected{{/compare}}>Oldest</option>
            </select>
            <label class="mdc-floating-label mdc-select__label--float-above" for="sort">
              Sort
            </label>
          </div>
        </form>
      </div>
    </div>
  </div>
  {{#if @root.request.params.query.id}}
    <p class="">Your interest in this opportunity has been registered.
      The organisation has been contacted, and will respond to you at the email provided</p>
  {{/if}}
  {{#compare @root.data.registered_interest_opportunities.current.hits.total "===" 0}}
    <p class="mdc-typography--body1">
      You haven't yet registered interest in any current opportunities. To register interest, click the &ensp;<strong><span class="far fa-star mdc-chip__icon mdc-chip__icon--leading" aria-hidden="true"></span>Register Interest</strong>&ensp;button.
    </p>
  {{/compare}}

  {{#compare @root.data.registered_interest_opportunities.current.hits.total ">" 0}}
    {{#each @root.data.registered_interest_opportunities.current.hits.hits ~}}
      <div class="{{#compare _source.Id "===" @root.request.params.query.id}}fade-in{{/compare}}">
      {{> opportunity_search_result _source}}
        <div class ="pull-right">
          <a href="{{{@root.request.fullUrl}}}" onclick="sqlRemoveInterest('{{_source.Id}}')">Remove from this list</a>
        </div>
      </div>
    {{/each ~}}
    <div class="foot">
      {{> pagination paging=@root.data.registered_interest_opportunities.current.pagination}}
    </div>
  {{/compare}}
</div>

<script>

  function sqlRemoveInterest(Id){
      $link = $(this);
      $.ajax({
      type : "GET",
      url: "/remove-from-registered-interest?id=" + Id,
      success: function(result){
        window.location.href = $link.attr('href');
      }

    })
    return false;
  }
</script>
