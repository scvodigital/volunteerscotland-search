<div class="mdc-card__info--content-primary-row">
  <div class="mdc-card__info--content-primary">
    <div class="v-margin pull-right mdc-card__info--search-distance">
      {{#ifAny (compare @root.route.name "===" "opportunity_search") (compare @root.route.name "===" "opportunities_in") ~}}
      {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng ~}}
      {{#if home_based ~}}{{else}}
      {{#if distance ~}}
      {{#compare distance "!==" "Infinity" ~}}
      {{#compare distance "<=" @root.request.params.query.distance ~}}
      <ul class="fa-ul">
        <li class="mdc-typography--body2">
          <span class="fa-li"><span class="fas fa-location-arrow fa-fw" title="Distance"></span></span>
          {{#compare distance "<" 4 ~}}
            Less than {{inflect (round distance "up") "mile" "miles" true}} away
          {{else}}
            {{#compare distance "<" 10 ~}}
              Within {{round distance "up"}} miles
            {{else}}
              {{round distance "up"}} miles away
            {{/compare ~}}
          {{/compare ~}}
        </li>
      </ul>
      {{else}}
      <ul class="fa-ul">
        <li class="mdc-typography--body2">
          <span class="fa-li"><span class="far fa-location-arrow fa-fw" title="Location"></span></span>
          {{#compare (getType advertised_areas) "string" ~}}
          {{{advertised_areas}}}
          {{else}}
          {{#each advertised_areas ~}}
          {{{this}}}{{#unless @isLast}}, {{/unless}}
          {{/each ~}}
          {{/compare ~}}
        </li>
      </ul>
      {{/compare ~}}
      {{else}}
      <ul class="fa-ul">
        <li class="mdc-typography--body2">
          <span class="fa-li"><span class="far fa-location-arrow fa-fw" title="Location"></span></span>
          {{#compare (getType advertised_areas) "string" ~}}
          {{{advertised_areas}}}
          {{else}}
          {{#each advertised_areas ~}}
          {{{this}}}{{#unless @isLast}}, {{/unless}}
          {{/each ~}}
          {{/compare ~}}
        </li>
      </ul>
      {{/compare ~}}
      {{/if ~}}
      {{/if ~}}
      {{/ifAll ~}}
      {{/ifAny ~}}
    </div>
    {{#compare @root.route.name "===" "opportunity" ~}}
    {{#if goodhq_organisation.image_url ~}}
    <div class="mdc-card__media mdc-card__media--content-secondary pull-right">
      <a href="/organisation/{{organisation_slug}}{{@root.request.url.search}}">
        <img src="{{goodhq_organisation.image_url}}" alt="{{organisation_name}}" />
      </a>
    </div>
    {{/if ~}}
    {{#if @root.request.url.search ~}}
    {{/if ~}}
    {{/compare ~}}
    <h2 class="mdc-card__info--content-primary-title mdc-typography--headline6">
      <a href="/opportunity/{{slug}}{{@root.request.url.search}}">
        <span class="hover-underline">{{title}}</span>
      </a>
    </h2>
    {{#ifAll organisation_slug organisation_name ~}}
    <ul class="fa-ul organisation">
      <li class="mdc-card__info--content-primary-organisation mdc-typography--body1">
        <span class="fa-li"><span class="far fa-home-heart" title="Organisation"></span></span>
        <a href="/organisation/{{organisation_slug}}{{@root.request.url.search}}">{{organisation_name}}</a>
      </li>
    </ul>
    {{/ifAll ~}}
    <ul class="fa-ul first">
      {{#if milo_ref ~}}
        <li class="mdc-card__info--content-primary-reference mdc-typography--body1">
          <span class="fa-li"><span class="far fa-hashtag" title="Reference"></span></span>
          {{milo_ref}}
        </li>
      {{/if ~}}
      {{#if volunteersearch_type ~}}
      {{#compare volunteersearch_type.length ">" 0 ~}}
        <li class="mdc-card__info--content-primary-reference mdc-typography--body1">
          <span class="fa-li"><span class="far fa-info-circle" title="Specialist role"></span></span>
          {{#each volunteersearch_type ~}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}
        </li>
      {{/compare ~}}
      {{/if ~}}
    </ul>
    <ul class="fa-ul last">
      {{#compare work_location "===" "At Home" ~}}
        {{#unless (contains volunteersearch_type "Home-based volunteering") ~}}
        <li class="mdc-card__info--content-primary-location mdc-typography--body1">
          <span class="fa-li"><span class="far fa-map-marker-alt fa-fw" title="Location"></span></span>
          Work from home
        </li>
        {{/unless ~}}
      {{else}}
        {{#compare (length geo) ">" 1 ~}}
          <li class="mdc-card__info--content-primary-location mdc-typography--body1">
            <span class="fa-li"><span class="far fa-map-marker-alt fa-fw" title="Location"></span></span>
            {{#each geo ~}}
              {{{this.admin_ward}}}{{#unless @last}}, {{/unless}}
            {{/each ~}}
          </li>
        {{else}}
          {{#if geo ~}}
            <li class="mdc-card__info--content-primary-location mdc-typography--body1">
              <span class="fa-li"><span class="far fa-map-marker-alt fa-fw" title="Location"></span></span>
              {{{geo.admin_ward}}}
            </li>
          {{/if ~}}
        {{/compare ~}}
      {{/compare ~}}
    </ul>
  </div>
  {{#if (contains (map @root.data.registeredInterest.items.[0] (getProp "value")) Id) ~}}
  {{#ifAny opportunity_contact_first_name opportunity_contact_last_name organisation_website ~}}
  <div class="mdc-card__info--content-primary">
    <h4 class="mdc-typography--headline6 t-margin-full">Contact</h4>
    {{#ifAny opportunity_contact_first_name opportunity_contact_last_name ~}}
    <div class="mdc-typography--body1">
      <strong>Name: </strong> {{{opportunity_contact_first_name}}} {{{opportunity_contact_last_name}}}
    </div>
    {{/ifAny ~}}

    {{#if opportunity_contact_email ~}}
    <div class="mdc-typography--body1">
      <strong>Email: </strong> <a href="mailto:{{{opportunity_contact_email}}}">{{{opportunity_contact_email}}}</a>
    </div>
    {{/if ~}}

    {{#if organisation_website ~}}
    <div class="mdc-typography--body1">
      <strong>Website: </strong> <a href="{{fixUrl organisation_website 'http'}}">{{{organisation_website}}}</a>
    </div>
    {{/if ~}}
  </div>
  {{/ifAny ~}}
  {{/if ~}}
</div>
